(()=>{"use strict";var e={n:t=>{var a=t&&t.__esModule?()=>t.default:()=>t;return e.d(a,{a}),a},d:(t,a)=>{for(var o in a)e.o(a,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:a[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=window.React,a=window.wc.blocksCheckout,o=window.wp.plugins,c=window.wp.element,n=window.wp.i18n,s=window.wp.data,r=window.wc.wcBlocksData,l=window.wc.wcSettings,i=window.ReactDOM,m=({iframeUrl:e,allowedOrigins:a,onSelect:o,onClose:n})=>{const s=(0,c.useCallback)(e=>{if(a.includes(e.origin)){if(e.data&&"dealerUpdate"===e.data.type){const t=e.data.value;t&&o(t)}e.data&&"closeModal"===e.data.type&&n()}},[a,o,n]),r=(0,c.useCallback)(e=>{"Escape"===e.key&&n()},[n]),l=(0,c.useCallback)(e=>{e.target===e.currentTarget&&n()},[n]);(0,c.useEffect)(()=>{window.addEventListener("message",s),document.addEventListener("keydown",r);const e=document.body.style.overflow;return document.body.style.overflow="hidden",()=>{window.removeEventListener("message",s),document.removeEventListener("keydown",r),document.body.style.overflow=e}},[s,r]);const m=(0,t.createElement)("div",{className:"automaticffl-dealer-layer visible",onClick:l,role:"dialog","aria-modal":"true","aria-label":"FFL Dealer Selection"},(0,t.createElement)("div",{className:"dealers-container"},(0,t.createElement)("iframe",{id:"automaticffl-map-iframe",src:e,title:"FFL Dealer Selection",style:{width:"100%",height:"100%",border:"none"}})));return(0,i.createPortal)(m,document.body)},d=({dealer:e,userName:a})=>{const o=[e.address1,e.city,e.stateOrProvinceCode].filter(Boolean).join(", "),c=(e=>{if(!e)return"";const t=e.replace(/\D/g,"");return 10===t.length?`(${t.slice(0,3)})-${t.slice(3,6)}-${t.slice(6)}`:e})(e.phone),s=`${a.first_name} ${a.last_name}`;return(0,t.createElement)("div",{id:"automaticffl-dealer-selected",className:"automaticffl-dealer-selected"},(0,t.createElement)("p",null,(0,n.__)("Your order will be shipped to","automaticffl-for-wc"),":"),(0,t.createElement)("div",{id:"ffl-selected-dealer",className:"ffl-result-body"},(0,t.createElement)("p",{className:"customer-name"},s),(0,t.createElement)("p",{className:"dealer-name"},e.company||""),(0,t.createElement)("p",{className:"dealer-address"},o),e.phone&&(0,t.createElement)("a",{href:`tel:${e.phone}`},(0,t.createElement)("p",null,(0,t.createElement)("span",{className:"dealer-phone dealer-phone-formatted"},c)))))},u=window.wp.apiFetch;var f=e.n(u);const w=({fflCount:e,regularCount:a,onSaved:o})=>{const[s,r]=(0,c.useState)(!1),[l,i]=(0,c.useState)(null),m=async e=>{r(!0),i(null);try{const t=await f()({path:"/automaticffl/v1/save-for-later",method:"POST",data:{item_type:e}});t.success?("function"==typeof o&&o(t),window.location.reload()):(i(t.message||(0,n.__)("Failed to save items.","automaticffl-for-wc")),r(!1))}catch(e){i(e.message||(0,n.__)("An error occurred. Please try again.","automaticffl-for-wc")),r(!1)}};return(0,t.createElement)("div",{className:"automaticffl-blocks-save-for-later"},(0,t.createElement)("p",{className:"automaticffl-blocks-save-prompt"},(0,n.__)("Choose which items to save for your next order:","automaticffl-for-wc")),l&&(0,t.createElement)("div",{className:"wc-block-components-notice-banner is-error",style:{marginBottom:"12px"}},(0,t.createElement)("div",{className:"wc-block-components-notice-banner__content"},l)),(0,t.createElement)("div",{className:"automaticffl-blocks-save-buttons"},(0,t.createElement)("button",{type:"button",className:"wc-block-components-button wp-element-button automaticffl-blocks-save-btn automaticffl-blocks-save-btn--primary",onClick:()=>m("ffl"),disabled:s},s?(0,n.__)("Saving...","automaticffl-for-wc"):1===e?(0,n.__)("FFL item (1)","automaticffl-for-wc"):`${(0,n.__)("FFL items","automaticffl-for-wc")} (${e})`),(0,t.createElement)("button",{type:"button",className:"wc-block-components-button wp-element-button automaticffl-blocks-save-btn automaticffl-blocks-save-btn--secondary",onClick:()=>m("regular"),disabled:s},s?(0,n.__)("Saving...","automaticffl-for-wc"):1===a?(0,n.__)("Regular item (1)","automaticffl-for-wc"):`${(0,n.__)("Regular items","automaticffl-for-wc")} (${a})`)),(0,t.createElement)("p",{className:"automaticffl-blocks-save-help"},(0,n.__)("Saved items will be restored to your cart after checkout.","automaticffl-for-wc")))};let p=!1,h=null;const b=(e,t)=>{if(!e||!t)return e||"";let a=e.replace(t,"");return a=a.replace(/\s*[-–—|/\\]\s*$/,"").replace(/^\s*[-–—|/\\]\s*/,"").trim(),a},v=[".wp-block-woocommerce-checkout-shipping-address-block",".wc-block-checkout__shipping-fields"],g=[".wc-block-checkout__use-address-for-billing"],E=({onDismiss:e})=>(0,t.createElement)("div",{className:"automaticffl-unavailable-notice"},(0,t.createElement)("div",{className:"wc-block-components-notices"},(0,t.createElement)("div",{className:"wc-block-components-notice-banner is-info automaticffl-unavailable-message"},(0,t.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24","aria-hidden":"true",focusable:"false"},(0,t.createElement)("path",{d:"M12 3.2c-4.8 0-8.8 3.9-8.8 8.8 0 4.8 3.9 8.8 8.8 8.8 4.8 0 8.8-3.9 8.8-8.8 0-4.8-4-8.8-8.8-8.8zm0 16c-4 0-7.2-3.2-7.2-7.2C4.8 8 8 4.8 12 4.8s7.2 3.2 7.2 7.2c0 4-3.2 7.2-7.2 7.2zM11 8h2v6h-2V8zm0 8h2v2h-2v-2z"})),(0,t.createElement)("div",{className:"wc-block-components-notice-banner__content"},(0,t.createElement)("p",null,(0,t.createElement)("strong",null,(0,n.__)("Automatic FFL Unavailable","automaticffl-for-wc"))),(0,t.createElement)("p",null,(0,n.__)("Please contact our store after placing an order.","automaticffl-for-wc")),(0,t.createElement)("button",{type:"button",className:"wc-block-components-button wp-element-button",onClick:e},(0,n.__)("OK","automaticffl-for-wc")))))),_=()=>{const e=(()=>{let e=(0,l.getSetting)("automaticffl_data",null);return!e&&"undefined"!=typeof window&&window.automaticfflBlocksData&&(e=window.automaticfflBlocksData),e=e||{},{isFflCart:e.isFflCart||!1,hasFflProducts:e.hasFflProducts||!1,isMixedCart:e.isMixedCart||!1,iframeUrl:e.iframeUrl||"",allowedOrigins:e.allowedOrigins||[],userName:e.userName||{first_name:"FFL",last_name:"Dealer"},isConfigured:e.isConfigured||!1,hasFirearms:e.hasFirearms||!1,hasAmmo:e.hasAmmo||!1,isAmmoOnly:e.isAmmoOnly||!1,isAmmoEnabled:e.isAmmoEnabled||!1,ammoRestrictedStates:e.ammoRestrictedStates||[],isApiAvailable:!1!==e.isApiAvailable,usStates:e.usStates||{},isAmmoRegularMixed:e.isAmmoRegularMixed||!1,isFirearmsRegularMixed:e.isFirearmsRegularMixed||!1,selectedAmmoState:e.selectedAmmoState||"",cartUrl:e.cartUrl||"",fflItemCount:e.fflItemCount||0,regularItemCount:e.regularItemCount||0,hasSavedItems:e.hasSavedItems||!1,savedItemsCount:e.savedItemsCount||0}})(),[a,o]=(0,c.useState)(!1),[i,u]=(0,c.useState)(h),[f,_]=(0,c.useState)(!1),[y,k]=(0,c.useState)(!1),[C,A]=(0,c.useState)(p),{setShippingAddress:N}=(0,s.useDispatch)(r.CART_STORE_KEY),F=(0,s.useSelect)(e=>{const t=e(r.CART_STORE_KEY);return(t.getCustomerData?.()?.shippingAddress||{}).state||""},[]),S=e.isAmmoOnly&&e.isAmmoEnabled&&""!==F&&e.ammoRestrictedStates.includes(F),x=(0,c.useRef)({required:!1,selected:!1,isAmmoOnly:!1});(0,c.useEffect)(()=>{p=C},[C]),(0,c.useEffect)(()=>{h=i},[i]);const M=(0,c.useCallback)((e,t)=>{try{const a=wp.data.dispatch("wc/store/checkout");a&&"function"==typeof a.setExtensionData?a.setExtensionData(e,t):a&&"function"==typeof a.__internalSetExtensionData&&a.__internalSetExtensionData(e,t)}catch(e){console.error("AutomaticFFL: Could not set extension data",e)}},[]),O=(0,c.useRef)(!1),L=(0,c.useCallback)(t=>{const a={...t,company:b(t.company,t.fflID)};u(a),o(!1),t&&t.fflID&&_(!1),e.isAmmoOnly&&e.isAmmoEnabled&&!C&&A(!0),M("automaticffl",{fflLicense:t.fflID||"",fflExpirationDate:t.expirationDate||"",fflUuid:t.uuid||""}),N({first_name:e.userName.first_name,last_name:e.userName.last_name,company:a.company||"",address_1:a.address1||"",address_2:a.address2||"",city:a.city||"",state:a.stateOrProvinceCode||"",postcode:a.postalCode||"",country:a.countryCode||"US",phone:a.phone||""})},[M,N,e.userName,e.isAmmoOnly,e.isAmmoEnabled,C]);if((0,c.useEffect)(()=>{const t=e.hasFirearms&&!e.isMixedCart&&e.isConfigured||C,a=()=>{(()=>{for(const e of v){const a=document.querySelector(e);a&&(t?(a.style.display="none",a.setAttribute("data-ffl-hidden","true"),O.current=!0):"true"===a.getAttribute("data-ffl-hidden")&&(a.style.display="",a.removeAttribute("data-ffl-hidden"),O.current=!1))}})(),(()=>{for(const e of g){const a=document.querySelector(e);if(a)if(t){const e=a.querySelector('input[type="checkbox"]')||a;e.checked&&e.click(),a.style.display="none",a.setAttribute("data-ffl-hidden","true")}else"true"===a.getAttribute("data-ffl-hidden")&&(a.style.display="",a.removeAttribute("data-ffl-hidden"))}})()};a();const o=new MutationObserver(e=>{e.some(e=>"childList"===e.type&&e.addedNodes.length>0&&Array.from(e.addedNodes).some(e=>e.nodeType===Node.ELEMENT_NODE&&[...v,...g].some(t=>e.matches?.(t)||e.querySelector?.(t))))&&a()}),c=document.querySelector(".wc-block-checkout")||document.body;return o.observe(c,{childList:!0,subtree:!0}),t?document.body.classList.add("automaticffl-checkout-active"):document.body.classList.remove("automaticffl-checkout-active"),()=>{if(o.disconnect(),O.current){for(const e of v){const t=document.querySelector(e);t&&"true"===t.getAttribute("data-ffl-hidden")&&(t.style.display="",t.removeAttribute("data-ffl-hidden"))}for(const e of g){const t=document.querySelector(e);t&&"true"===t.getAttribute("data-ffl-hidden")&&(t.style.display="",t.removeAttribute("data-ffl-hidden"))}document.body.classList.remove("automaticffl-checkout-active")}}},[e.hasFirearms,e.isMixedCart,e.isConfigured,C]),(0,c.useEffect)(()=>{const t=wp?.data?.dispatch?.("wc/store/validation");if(!t)return;const{setValidationErrors:a,clearValidationError:o}=t,c="automaticffl-ammo-regular-blocked",s="automaticffl-ffl-required";return e.isAmmoRegularMixed&&e.isAmmoEnabled&&F&&e.ammoRestrictedStates.includes(F)?a({[c]:{message:(0,n.__)("Please modify your cart to continue.","automaticffl-for-wc"),hidden:!0}}):o(c),(e.hasFirearms&&!e.isMixedCart||e.isAmmoOnly&&e.isAmmoEnabled&&(C||S))&&!i?(a({[s]:{message:e.isAmmoOnly?e.i18n?.selectDealerAmmoRequired||(0,n.__)("Please select an FFL dealer. Your state requires ammunition to be shipped to a licensed dealer.","automaticffl-for-wc"):e.i18n?.selectDealerBeforeOrder||(0,n.__)("Please select an FFL dealer before placing your order.","automaticffl-for-wc"),hidden:!0}}),_(!0)):(o(s),_(!1)),()=>{t&&(o(c),o(s))}},[i,e.hasFirearms,e.isMixedCart,e.isAmmoOnly,e.isAmmoEnabled,S,C,e.isAmmoRegularMixed,e.ammoRestrictedStates,e.usStates,F]),(0,c.useEffect)(()=>{const t=e.hasFirearms&&!e.isMixedCart||e.isAmmoOnly&&e.isAmmoEnabled&&(C||S);x.current={required:t,selected:!!i,isAmmoOnly:e.isAmmoOnly}},[i,e.hasFirearms,e.isMixedCart,e.isAmmoOnly,e.isAmmoEnabled,C,S]),(0,c.useEffect)(()=>{const t=wp?.data?.select?.("wc/store/checkout");if(!t)return;const a="automaticffl-ffl-required";let o=!1;const c=wp.data.subscribe(()=>{if(t.isBeforeProcessing?.()||"before_processing"===t.getCheckoutStatus?.())o=!0;else if(o){o=!1;const{required:t,selected:c,isAmmoOnly:s}=x.current;if(t&&!c){const t=wp?.data?.dispatch?.("core/notices");if(t?.createNotice){const o=s?e.i18n?.selectDealerAmmoRequired||(0,n.__)("Please select an FFL dealer. Your state requires ammunition to be shipped to a licensed dealer.","automaticffl-for-wc"):e.i18n?.selectDealerBeforeOrder||(0,n.__)("Please select an FFL dealer before placing your order.","automaticffl-for-wc");t.createNotice("error",o,{context:"wc/checkout",id:a})}}}});return()=>{c();const e=wp?.data?.dispatch?.("core/notices");e?.removeNotice?.(a,"wc/checkout")}},[]),(0,c.useEffect)(()=>{if(i){const e=wp?.data?.dispatch?.("core/notices");e?.removeNotice?.("automaticffl-ffl-required","wc/checkout")}},[i]),(0,c.useEffect)(()=>{!C&&e.isAmmoOnly&&e.isAmmoEnabled&&""!==F&&!e.ammoRestrictedStates.includes(F)&&i&&(u(null),M("automaticffl",{fflLicense:"",fflExpirationDate:"",fflUuid:""}))},[F,e.isAmmoOnly,e.isAmmoEnabled,e.ammoRestrictedStates,i,M,C]),!e.isApiAvailable&&!y)return(0,t.createElement)(E,{onDismiss:()=>k(!0)});if(!e.isApiAvailable&&y)return null;if(!e.hasFirearms&&!e.hasAmmo&&!e.hasFflProducts)return null;if(e.isFirearmsRegularMixed)return(0,t.createElement)("div",{className:"wc-block-components-notices"},(0,t.createElement)("div",{className:"wc-block-components-notice-banner is-error"},(0,t.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24","aria-hidden":"true",focusable:"false"},(0,t.createElement)("path",{d:"M12 3.2c-4.8 0-8.8 3.9-8.8 8.8 0 4.8 3.9 8.8 8.8 8.8 4.8 0 8.8-3.9 8.8-8.8 0-4.8-4-8.8-8.8-8.8zm0 16c-4 0-7.2-3.2-7.2-7.2C4.8 8 8 4.8 12 4.8s7.2 3.2 7.2 7.2c0 4-3.2 7.2-7.2 7.2zM11 8h2v5h-2V8zm0 6h2v2h-2v-2z"})),(0,t.createElement)("div",{className:"wc-block-components-notice-banner__content"},(0,n.__)("Firearms must be shipped to an FFL dealer and cannot be combined with regular products.","automaticffl-for-wc"),(0,t.createElement)(w,{fflCount:e.fflItemCount,regularCount:e.regularItemCount}))));if(e.isAmmoRegularMixed&&e.isAmmoEnabled){const a=F&&e.ammoRestrictedStates.includes(F),o=e.usStates[F]||F;return a?(0,t.createElement)("div",{className:"wc-block-components-notices"},(0,t.createElement)("div",{className:"wc-block-components-notice-banner is-error"},(0,t.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24","aria-hidden":"true",focusable:"false"},(0,t.createElement)("path",{d:"M12 3.2c-4.8 0-8.8 3.9-8.8 8.8 0 4.8 3.9 8.8 8.8 8.8 4.8 0 8.8-3.9 8.8-8.8 0-4.8-4-8.8-8.8-8.8zm0 16c-4 0-7.2-3.2-7.2-7.2C4.8 8 8 4.8 12 4.8s7.2 3.2 7.2 7.2c0 4-3.2 7.2-7.2 7.2zM11 8h2v5h-2V8zm0 6h2v2h-2v-2z"})),(0,t.createElement)("div",{className:"wc-block-components-notice-banner__content"},(0,n.__)("Ammunition and regular products in your cart require separate orders for shipping to","automaticffl-for-wc")," ",o,".",(0,t.createElement)(w,{fflCount:e.fflItemCount,regularCount:e.regularItemCount})))):null}if(e.isMixedCart&&!e.isFirearmsRegularMixed&&!e.isAmmoRegularMixed)return(0,t.createElement)("div",{className:"wc-block-components-notices"},(0,t.createElement)("div",{className:"wc-block-components-notice-banner is-error"},(0,t.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24","aria-hidden":"true",focusable:"false"},(0,t.createElement)("path",{d:"M12 3.2c-4.8 0-8.8 3.9-8.8 8.8 0 4.8 3.9 8.8 8.8 8.8 4.8 0 8.8-3.9 8.8-8.8 0-4.8-4-8.8-8.8-8.8zm0 16c-4 0-7.2-3.2-7.2-7.2C4.8 8 8 4.8 12 4.8s7.2 3.2 7.2 7.2c0 4-3.2 7.2-7.2 7.2zM11 8h2v5h-2V8zm0 6h2v2h-2v-2z"})),(0,t.createElement)("div",{className:"wc-block-components-notice-banner__content"},(0,n.__)("FFL products and regular products cannot be purchased together.","automaticffl-for-wc"),(0,t.createElement)(w,{fflCount:e.fflItemCount,regularCount:e.regularItemCount}))));if(e.isAmmoOnly&&e.isAmmoEnabled&&!C)return F?S?e.isConfigured?(0,t.createElement)("div",{className:"automaticffl-dealer-selection"},(0,t.createElement)("div",{className:"wc-block-components-notices"},(0,t.createElement)("div",{className:"wc-block-components-notice-banner is-info"},(0,t.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24","aria-hidden":"true",focusable:"false"},(0,t.createElement)("path",{d:"M12 3.2c-4.8 0-8.8 3.9-8.8 8.8 0 4.8 3.9 8.8 8.8 8.8 4.8 0 8.8-3.9 8.8-8.8 0-4.8-4-8.8-8.8-8.8zm0 16c-4 0-7.2-3.2-7.2-7.2C4.8 8 8 4.8 12 4.8s7.2 3.2 7.2 7.2c0 4-3.2 7.2-7.2 7.2zM11 8h2v6h-2V8zm0 8h2v2h-2v-2z"})),(0,t.createElement)("div",{className:"wc-block-components-notice-banner__content"},e.i18n?.selectDealerBelow||(0,n.__)("FFL dealer selection is required for ammunition shipping to your state. Please select a dealer below.","automaticffl-for-wc")))),i&&(0,t.createElement)(d,{dealer:i,userName:e.userName}),(0,t.createElement)("button",{type:"button",className:"wc-block-components-button wp-element-button ffl-search-button",onClick:()=>o(!0)},(0,t.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",width:"16",height:"16",fill:"currentColor","aria-hidden":"true",style:{verticalAlign:"middle",marginRight:"8px"}},(0,t.createElement)("path",{d:"M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM208 352a144 144 0 1 0 0-288 144 144 0 1 0 0 288z"})),i?(0,n.__)("Change Dealer","automaticffl-for-wc"):(0,n.__)("Find a Dealer","automaticffl-for-wc")),a&&(0,t.createElement)(m,{iframeUrl:e.iframeUrl,allowedOrigins:e.allowedOrigins,onSelect:L,onClose:()=>o(!1)})):(0,t.createElement)("div",{className:"automaticffl-dealer-selection"},(0,t.createElement)("div",{className:"wc-block-components-notices"},(0,t.createElement)("div",{className:"wc-block-components-notice-banner is-error"},(0,t.createElement)("div",{className:"wc-block-components-notice-banner__content"},e.i18n?.fflNotConfiguredContact||(0,n.__)("FFL dealer selection is required for ammunition shipping to your state, but is not configured. Please contact the site administrator.","automaticffl-for-wc"))))):(0,t.createElement)("div",{className:"automaticffl-ammo-notice"},(0,t.createElement)("div",{className:"wc-block-components-notices"},(0,t.createElement)("div",{className:"wc-block-components-notice-banner is-success"},(0,t.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24","aria-hidden":"true",focusable:"false"},(0,t.createElement)("path",{d:"M16.7 7.1l-6.3 8.5-3.3-2.5-.9 1.2 4.5 3.4L17.9 8z"})),(0,t.createElement)("div",{className:"wc-block-components-notice-banner__content"},e.i18n?.standardShippingAvailable||(0,n.__)("Standard shipping is available for ammunition to your state.","automaticffl-for-wc"))))):(0,t.createElement)("div",{className:"automaticffl-ammo-notice"},(0,t.createElement)("div",{className:"wc-block-components-notices"},(0,t.createElement)("div",{className:"wc-block-components-notice-banner is-info"},(0,t.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24","aria-hidden":"true",focusable:"false"},(0,t.createElement)("path",{d:"M12 3.2c-4.8 0-8.8 3.9-8.8 8.8 0 4.8 3.9 8.8 8.8 8.8 4.8 0 8.8-3.9 8.8-8.8 0-4.8-4-8.8-8.8-8.8zm0 16c-4 0-7.2-3.2-7.2-7.2C4.8 8 8 4.8 12 4.8s7.2 3.2 7.2 7.2c0 4-3.2 7.2-7.2 7.2zM11 8h2v6h-2V8zm0 8h2v2h-2v-2z"})),(0,t.createElement)("div",{className:"wc-block-components-notice-banner__content"},e.i18n?.ammoSelectState||(0,n.__)("You have ammunition in your cart. Please select your shipping state to determine shipping options.","automaticffl-for-wc")))));if(!e.isConfigured)return(0,t.createElement)("div",{className:"wc-block-components-notices"},(0,t.createElement)("div",{className:"wc-block-components-notice-banner is-error"},(0,t.createElement)("div",{className:"wc-block-components-notice-banner__content"},(0,n.__)("FFL dealer selection is not configured. Please contact the site administrator.","automaticffl-for-wc"))));const z=!(C&&i),D=C?(0,n.__)("Your state requires ammunition to be shipped to a licensed FFL dealer. Please select a dealer below.","automaticffl-for-wc"):(0,n.__)("You have a firearm in your cart and must choose a Licensed Firearm Dealer (FFL) for the Shipping Address.","automaticffl-for-wc");return(0,t.createElement)("div",{className:"automaticffl-dealer-selection"},z&&(0,t.createElement)("div",{className:"wc-block-components-notices"},(0,t.createElement)("div",{className:"wc-block-components-notice-banner is-info"},(0,t.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24","aria-hidden":"true",focusable:"false"},(0,t.createElement)("path",{d:"M12 3.2c-4.8 0-8.8 3.9-8.8 8.8 0 4.8 3.9 8.8 8.8 8.8 4.8 0 8.8-3.9 8.8-8.8 0-4.8-4-8.8-8.8-8.8zm0 16c-4 0-7.2-3.2-7.2-7.2C4.8 8 8 4.8 12 4.8s7.2 3.2 7.2 7.2c0 4-3.2 7.2-7.2 7.2zM11 8h2v6h-2V8zm0 8h2v2h-2v-2z"})),(0,t.createElement)("div",{className:"wc-block-components-notice-banner__content"},D))),i&&(0,t.createElement)(d,{dealer:i,userName:e.userName}),(0,t.createElement)("button",{type:"button",className:"wc-block-components-button wp-element-button ffl-search-button",onClick:()=>o(!0)},(0,t.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",width:"16",height:"16",fill:"currentColor","aria-hidden":"true",style:{verticalAlign:"middle",marginRight:"8px"}},(0,t.createElement)("path",{d:"M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM208 352a144 144 0 1 0 0-288 144 144 0 1 0 0 288z"})),i?(0,n.__)("Change Dealer","automaticffl-for-wc"):(0,n.__)("Find a Dealer","automaticffl-for-wc")),a&&(0,t.createElement)(m,{iframeUrl:e.iframeUrl,allowedOrigins:e.allowedOrigins,onSelect:L,onClose:()=>o(!1)}))};(0,o.registerPlugin)("automaticffl-dealer-selection",{render:()=>(0,t.createElement)(a.ExperimentalOrderShippingPackages,null,(0,t.createElement)(_,null)),scope:"woocommerce-checkout"})})();